spring:
    application:
        name: edge-server
    cloud:
        gateway:
            filter:
                secure-headers:
                    disable: x-frame-options
    sleuth:
        baggage:
            remote-fields:
                - requestId
management:
    endpoints:
        web:
            exposure:
                include: '*'
            cors:
                allowed-origins: '*'
                allow-credentials: false
opentracing:
    spring:
        web:
            skip-pattern: "/actuator.*|/api-docs.*|/swagger.*|.*\\.png|.*\\.css|.*\\.js|.*\\.html|/favicon.ico|/hystrix.stream"
---
spring:
    config:
        activate:
            on-profile: consul
        import: consul:${consul_url:localhost:8500}
    cloud:
        consul:
            config:
                fail-fast: ${FAIL_FAST:true}
                format: yaml
        gateway:
            globalcors:
                cors-configurations:
                    '[/**]':
                        allowedOrigins:
                            - "http://localhost:3000"
                            - "http://localhost:3001"
                            - "http://localhost:8080"
                        allowedHeaders: "*"
                        allowedMethods: "*"
                        allowCredentials: true
            default-filters:
                - DedupeResponseHeader=Access-Control-Allow-Credentials Access-Control-Allow-Origin
    autoconfigure:
        exclude: org.springframework.cloud.consul.config.ConsulConfigAutoConfiguration

---
spring:
    config:
        activate:
            on-profile: prod
    cloud:
        gateway:
            globalcors:
                cors-configurations:
                    '[/**]':
                        allowedOrigins:
                            - "https://spendingbetter.com"
#                        allowedOrigins: "https://spendingbetter.com"
                        allowedHeaders: "*"
                        allowedMethods: "*"
                        allowCredentials: true
            default-filters:
                - DedupeResponseHeader=Access-Control-Allow-Credentials Access-Control-Allow-Origin
            discovery:
                locator:
                    enabled: true
                    url-expression: "'http://'+serviceId+':'+getPort()"
                    lower-case-service-id: true